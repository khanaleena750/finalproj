<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EFMS</title>
  <script src="https://unpkg.com/whatwg-fetch"></script>
  <!-- <style>
         .error-message {
           color: red;
           /* Set the text color to red */
           font-size: 14px;
           /* Set the font size */
           background-color: #ffe6e6;
           /* Set a light background color */
           padding: 8px;
           /* Add some padding for better visibility */
           margin-top: 10px;
           /* Adjust spacing from other elements */
           display: none;
           /* Initially hide the error message */
         }
         </style> -->
  <!-- font awesome css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- local css file -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/login.css" />
  <link rel="stylesheet" href="css/form.css" />
  <link rel="stylesheet" href="css/about.css" />
  <link rel="stylesheet" href="css/survey.css" />
</head>

<body>
  <!-- header -->
  <header class="header">
    <a href="#" class="logo">EFMS</a>
    <a class="menu fas fa-bars"></a>
    <nav class="navbar">
      <a href="#">home</a>
      <a href="#about">about</a>
      <!-- <a href="#projects">projects</a> -->
      <a href="#contact">contact</a>
      <a href="#login">log in</a>
    </nav>
  </header>
  <!-- home section -->
  <section id="home" class="home">
    <div class="background-image"></div>
    <div class="content">
      <h1>Educational Feedback <br> Management System</h1>
    </div>
  </section>
  <!-- home section -->
  <!-- about section -->
  <section id="about" class="about">
    <img src="/images/about.png" alt="About Image">
    <h2 class="heading">EFMS's aim</h2>
    <p style="font-size: 15px; line-height: 1.6;">
      The goal of this website is to facilitate simple communication between the student body and the student
      council. Students will be able to effectively express their concerns by completing forms regarding the
      relevant issue and receiving regular updates on the status of their complaint, including whether it has been
      completed, postponed, or is still pending. Additionally, the student council also has access to this website in
      order to view the forms. Features such as sort and more will be available to make it more effective.
    </p>
  </section>
  <!-- about section -->
  <!-- why us? section -->
  <div class="line-break"></div>
  <section id="whyus" class="services">
    <h2 class="heading">Why us?</h2>
    <div class="box-container">
      <div class="box">
        <ion-icon name="navigate-outline"></ion-icon>
        <span>communication</span>
        <p>Registered Students being able to voice out their opinions in a effective way</p>
      </div>
      <div class="box">
        <ion-icon name="medal-outline"></ion-icon>
        <span>faculty engagement</span>
        <p>ensures that proposed changes are reviewed by relevant stakeholders, promoting a
          collaborative approach to addressing student concerns.
        </p>
      </div>
      <div class="box">
        <ion-icon name="flame-outline"></ion-icon>
        <span>empowerment of students design</span>
        <p>empowers them to actively participate in the improvement of their educational experience. </p>
      </div>
      <div class="box">
        <ion-icon name="layers-outline"></ion-icon>
        <span>Environmentally Friendly</span>
        <p>The digital platform reduces the need for physical forms, paperwork, and manual filing systems,
          aligning with modern eco-friendly practices.
        </p>
      </div>
      <div class="box">
        <ion-icon name="flash-outline"></ion-icon>
        <span>Accountability and Documentation</span>
        <p>a transparent and traceable record of communication and decision-making.</p>
      </div>
      <div class="box">
        <ion-icon name="magnet-outline"></ion-icon>
        <span>no security issues</span>
        <p>as only logged in students will be able to send in suggestions. Thus, misuse of the website is very
          slim.
        </p>
      </div>
  </section>
  <!-- Log In Form -->
  <section id="login" class="login">
    <div style="text-align: center;">
      <h2 class="heading">Fill the form</h2>
      <h2 id="login-message">To be able to access all our features, please log in.</h2>
    </div>
    <br>
    <div class="grid">
      <div id="login-container">
        <!-- Login Form -->
        <form class="form login" id="login-form">
          <div class="form__field">
            <label for="login__username">
              <span class="hidden">Username</span>
            </label>
            <input id="login__username" type="text" name="username" class="form__input" placeholder="Username" required>
          </div>
          <br>
          <div class="form__field">
            <label for="login__password">
              <span class="hidden">Password</span>
            </label>
            <input id="login__password" type="password" name="password" class="form__input" placeholder="Password"
              required>
          </div>
          <br>
          <!-- Ensure that the login button has the ID login__submit -->
          <input type="submit" id="login__submit" value="Log In">
        </form>
        <!-- Login Error Message -->
        <div id="login-error-message" class="error-message"></div>
      </div>
    </div>
    <p class="text--center" id="signup-text">
      Not a member? <a href="#" id="signup-now-link">Sign up now</a>
    </p>
  </section>
  <!-- Signup Form (initially hidden) -->
  <section id="signup" class="signup" style="display: none;">
    <div style="text-align: center;">
      <h2 class="heading">Create an account now!</h2>
    </div>
    <br>
    <div class="grid">
      <div id="signup-container">
        <!-- Signup Form -->
        <form class="form signup" id="signup-form">
          <!-- First Name Field -->
          <div class="form__field">
            <label for="signup__firstname">
              <span class="hidden">First Name</span>
            </label>
            <input id="signup__firstname" type="text" name="firstname" class="form__input" placeholder="First Name"
              required>
          </div>
          <!-- Last Name Field -->
          <div class="form__field">
            <label for="signup__lastname">
              <span class="hidden">Last Name</span>
            </label>
            <input id="signup__lastname" type="text" name="lastname" class="form__input" placeholder="Last Name"
              required>
          </div>
          <!-- Email Field -->
          <div class="form__field">
            <label for="signup__email">
              <span class="hidden">Email</span>
            </label>
            <input id="signup__email" type="text" name="email" class="form__input" placeholder="Email" required
              pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}">
            <div id="email-error" class="error-message"></div>
          </div>
          <!-- Username Field -->
          <div class="form__field">
            <label for="signup__username">
              <span class="hidden">Username</span>
            </label>
            <input id="signup__username" type="text" name="username" class="form__input" placeholder="Username"
              required>
          </div>
          <!-- Password Field -->
          <div class="form__field">
            <label for="signup__password">
              <span class="hidden">Password</span>
            </label>
            <input id="signup__password" type="password" name="password" class="form__input" placeholder="Password"
              required
              pattern='^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>])[a-zA-Z\d!@#$%^&*(),.?":{}|<>]{8,}$'>
            <div id="password-error" class="error-message"></div>
          </div>
          <!-- Re-enter Password Field -->
          <div class="form__field">
            <label for="reenter__password">
              <span class="hidden">Re-enter Password</span>
            </label>
            <input id="reenter__password" type="password" name="reenter_password" class="form__input"
              placeholder="Re-enter Password" required>
            <div id="password-match-error" class="error-message"></div>
          </div>
          <!-- Submit Button -->
          <div class="form__field">
            <input type="submit" value="Sign Up">
          </div>
        </form>
      </div>
    </div>
    <p class="text--center" id="login-text" style="display: none;">
      Already a member? <a href="#" id="login-now-link">Log in now</a>
    </p>
  </section>



  <div id="survey_container">
    <section id="survey" class="survey-form">
      <div class="survey-container">
        <!-- Header -->
        <h1 id="title" class="survey__title">EFMS Survey Form</h1>
        <p id="description" class="survey__description">
          We would love to hear your thoughts on how we can improve your experience.
        </p>
        <!-- Form Container -->
        <div id="form-container">
          <!-- Main Content -->
          <main class="main">
            <!-- Survey Form -->
            <form action="#" method="GET" id="survey-form" class="survey" novalidate>
              <!-- Progress Bar -->
              <div class="progressbar" tabindex="0" role="progressbar" aria-valuemin="1" aria-valuemax="5"
                aria-valuenow="1" aria-valuetext="Question 1 of 5: How long have you been using our product?">
                <span class="progressbar__step active" aria-hidden="true" style="font-size: 18px !important;"></span>
                <span class="progressbar__step" aria-hidden="true" style="font-size: 18px !important;"></span>
                <span class="progressbar__step" aria-hidden="true" style="font-size: 18px !important;"></span>
                <span class="progressbar__step" aria-hidden="true" style="font-size: 18px !important;"></span>
                <span class="progressbar__step" aria-hidden="true" style="font-size: 18px !important;"></span>
              </div>
              <!-- Survey Panels -->
              <!-- Question 1 -->
              <section class="survey__panel survey__panel--current" aria-hidden="false" data-index="1"
                data-panel="firstPanel" data-requirement="option">
                <!-- Question -->
                <h2 class="survey__panel__question">
                  <span class="visuallyhidden">Question 1 of 5 </span>You are a student enrolled in?
                </h2>
                <!-- Options -->
                <div class="survey__panel__period">
                  <div class="form-group">
                    <input id="school" type="radio" name="question_1" value="School" />
                    <label for="school">school</label>
                  </div>
                  <div class="form-group">
                    <input id="university" type="radio" name="question_1" value="University" />
                    <label for="university">university</label>
                  </div>
                </div>
                <p class="error-message"></p>
              </section>
              <!-- Question 2 -->
              <section class="survey__panel" aria-hidden="true" data-index="2" data-panel="secondPanel"
                data-requirement="option">
                <h2 class="survey__panel__question">
                  <span class="visuallyhidden">Question 2 of 5 </span>Choose your course:
                </h2>
                <div class="survey__panel__period">
                  <div class="form-group">
                    <input id="law" type="radio" name="question_2" value="Law" />
                    <label for="law">Law</label>
                  </div>
                  <div class="form-group">
                    <input id="it" type="radio" name="question_2" value="IT" />
                    <label for="it">IT</label>
                  </div>
                  <div class="form-group">
                    <input id="business" type="radio" name="question_2" value="Business" />
                    <label for="business">Business</label>
                  </div>
                  <div class="form-group">
                    <input type="radio" name="question_2" id="psychology" value="Psychology" />
                    <label for="psychology">Psychology</label>
                  </div>
                  <div class="form-group"
                    style="width: 180px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <input type="text" name="question_2" id="other(pleaseSpecify)" placeholder="Other (Please Specify)"
                      style="margin: 5px; padding: 5px;" />
                    <label for="other(pleaseSpecify)">Other (Please specify)</label>
                  </div>
                </div>
                <p class="error-message"></p>
              </section>
              <!-- Question 3 -->
              <section class="survey__panel" aria-hidden="true" data-index="3" data-panel="thirdPanel"
                data-requirement="option">
                <h2 class="survey__panel__question">
                  <span class="visuallyhidden">Question 3 of 5 </span>In which department does your complaint lie in?
                </h2>
                <div class="survey__panel__period">
                  <div class="form-group">
                    <input id="studyenvironment" type="radio" name="question_3" value="Study Environment" />
                    <label for="studyenvironment">Study Environment</label>
                  </div>
                  <div class="form-group">
                    <input id="facilitymaintenance" type="radio" name="question_3" value="Facility Maintenance" />
                    <label for="facilitymaintenance">Facility Maintenance</label>
                  </div>
                  <div class="form-group">
                    <input id="safetysecurity" type="radio" name="question_3" value="Safety and Security" />
                    <label for="safetysecurity">Safety and Security</label>
                  </div>
                  <div class="form-group">
                    <input id="administrativeprocess" type="radio" name="question_3" value="Administrative Process" />
                    <label for="administrativeprocess">Administrative Process</label>
                  </div>
                </div>
                <p class="error-message"></p>
              </section>
              <!-- Question 4 -->
              <section class="survey__panel" aria-hidden="true" data-index="4" data-panel="fourthPanel"
                data-requirement="option">
                <h2 class="survey__panel__question">
                  <span class="visuallyhidden">Question 4 of 5 </span>Please pick the service you would like to use at
                  EFMS today
                </h2>
                <div class="survey__panel__period">
                  <div class="form-group">
                    <input type="radio" name="question_4" id="complaint" value="Complaint" />
                    <label for="complaint">Complaint</label>
                  </div>
                  <div class="form-group">
                    <input type="radio" name="question_4" id="suggestion" value="Suggestion" />
                    <label for="suggestion">Suggestion</label>
                  </div>
                  <div class="form-group">
                    <input type="radio" name="question_4" id="appreciation" value="Appreciation" />
                    <label for="appreciation">Appreciation</label>
                  </div>
                </div>
                <p class="error-message"></p>
              </section>
              <!-- Question 5 -->
              <section class="survey__panel" aria-hidden="true" data-index="5" data-panel="fifthPanel"
                data-requirement="option">
                <h2 class="survey__panel__question">
                  <span class="visuallyhidden">Question 5 of 5 </span>What is your Complaint in Study Environment?
                </h2>
                <div class="survey__panel__period">
                  <div class="form-group">
                    <input type="radio" name="question_5" id="variety_of_modules" value="Variety of Modules" />
                    <label for="variety_of_modules">Variety of Modules</label>
                  </div>
                  <div class="form-group">
                    <input type="radio" name="question_5" id="content_of_course" value="Content of Course" />
                    <label for="content_of_course">Content of Course</label>
                  </div>
                  <div class="form-group">
                    <input type="radio" name="question_5" id="delivery_of_course" value="Delivery of the course" />
                    <label for="delivery_of_course">Delivery of the course</label>
                  </div>
                  <div class="form-group">
                    <input type="radio" name="question_5" id="relevance_of_course"
                      value="Relevance of the course to practical life" />
                    <label for="relevance_of_course">Relevance of the course to practical life</label>
                  </div>
                </div>
                <p class="error-message"></p>
              </section>
              <!-- Buttons -->
              <div class="form-buttons">
                <button class="button" type="button" name="prev" disabled="disabled" aria-label="Previous"
                  aria-hidden="true">Prev</button>
                <button class="button" type="button" name="next" aria-label="Next" aria-hidden="false">Next</button>
                <button class="button" type="submit" id="submit" name="submit" disabled="disabled" aria-hidden="true">
                  Submit
                </button>
              </div>
              <br><br>
            </form>
          </main>
        </div>
      </div>
      <!-- Bell Button for Reminder -->
      <button class="bell-icon" id="reminder-button">
        <img src="/images/bell-icon.png" alt="Bell Icon" width="40" height="40" />
      </button>
      <div class="illustration-img">
        <img src="https://res.cloudinary.com/alexandracaulea/image/upload/v1585333913/illustration_x46ict.svg" alt=""
          aria-hidden="true" class="" width="400" height="400" draggable="false" />
      </div>
    </section>
  </div>

  <form class="logout-btn" id="logout-form">
    <button id="logout-button" class="button" type="submit">Logout</button>
  </form>


  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Add an event listener to the signup-now-link to toggle between login and signup forms
      const signupNowLink = document.getElementById('signup-now-link');
      signupNowLink.addEventListener('click', toggleForms);

      // Add an event listener to the login-now-link to toggle between login and signup forms
      const loginNowLink = document.getElementById('login-now-link');
      loginNowLink.addEventListener('click', toggleForms);

      // Add an event listener to the signup-form to handle form submission
      const signupForm = document.getElementById('signup-form');
      signupForm.addEventListener('submit', handleSignup);

      // // Add an event listener to the login-form to handle form submission
      const loginForm = document.getElementById('login-form');
      loginForm.addEventListener('submit', handleLogin);

      const logout = document.getElementById('logout-form');
      logout.addEventListener('submit', handleLogout);
    });

    // Function to handle logout form submission
    async function handleLogout() {
      localStorage.removeItem('userToken');
      console.log('Logout successful');

      // Clear cache
      await caches.delete('my-cache');

      // Reload the page
      location.reload();
    }

    // Function to toggle between login and signup forms
    function toggleForms(event) {
      event.preventDefault();

      const loginForm = document.getElementById('login-form');
      const signupForm = document.getElementById('signup-form');

      if (loginForm.style.display === '' || loginForm.style.display === 'block') {
        loginForm.style.display = 'none';
        signupForm.style.display = 'block';
        document.getElementById('signup-text').style.display = 'none';
        document.getElementById('login-text').style.display = 'block';
      } else {
        loginForm.style.display = 'block';
        signupForm.style.display = 'none';
        document.getElementById('signup-text').style.display = 'block';
        document.getElementById('login-text').style.display = 'none';
      }
    }

    // Function to handle signup form submission
    async function handleSignup(event) {
      event.preventDefault();

      // Get values from the form
      const firstName = document.getElementById('signup__firstname').value;
      const lastName = document.getElementById('signup__lastname').value;
      const email = document.getElementById('signup__email').value;
      const username = document.getElementById('signup__username').value;
      const password = document.getElementById('signup__password').value;
      const reenterPassword = document.getElementById('reenter__password').value;

      // Perform client-side validation (replace this with your validation logic)
      if (!isValidEmail(email)) {
        alert('Please enter a valid email address');
        return;
      }

      if (!isValidPassword(password)) {
        alert('Password must meet the specified requirements:\n' +
          '- At least 8 characters long\n' +
          '- At least one lowercase letter\n' +
          '- At least one uppercase letter\n' +
          '- At least one digit\n' +
          '- At least one special character');
        return;
      }

      if (password !== reenterPassword) {
        alert('Passwords do not match');
        return;
      }

      // Prepare the data to send to the server
      const signupData = {
        firstname: firstName,
        lastname: lastName,
        email: email,
        username: username,
        password: password,
      };

      // Send a POST request to the server for signup
      const signupUrl = 'http://localhost:3000/signup#login'; // replace with your actual signup URL
      const signupResponse = await fetch(signupUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(signupData),
      });

      // Handle the server response (you can customize this based on your server's response format)
      if (signupResponse.ok) {
        const signupResult = await signupResponse.json();
        alert(signupResult.message);
      } else {
        const signupError = await signupResponse.json();
        alert(`Signup failed: ${signupError.message}`);
      }
    }

    // Function to handle login form submission
    async function handleLogin(event) {
      event.preventDefault(); // Prevent the default form submission behavior

      // Get values from the form
      const usernameInput = document.getElementById('login__username');
      const passwordInput = document.getElementById('login__password');
      const errorElement = document.getElementById('login-error-message');

      // Check for element existence
      if (usernameInput && passwordInput) {
        const username = usernameInput.value;
        const password = passwordInput.value;

        // Send a POST request to the server for login
        try {
          const response = await fetch('http://localhost:3000/login', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ username, password }),
          });

          // if (!response.ok) {
          //   alert('Incorrect Username or Password');
          // }

          const data = await response.json();

          // Handle the server response
          if (data.success) {
            // Successful login, redirect or perform other actions

            localStorage.setItem('userToken', true)
            console.log('Login successful');
            //Reload the DOM
            location.reload();
          } else {
            // Login failed, show an error message on the website
            errorElement.textContent = data.message || 'Unknown error';
            errorElement.style.display = 'block'; // Show the error message
            console.error('Login failed:', data.message || 'Unknown error');
          }
        } catch (error) {
          console.error('Error during login:', error.message);
        }
      } else {
        console.error("Elements with IDs 'login__username' and/or 'login__password' not found.");
      }
    }

    // Add your email and password validation functions here
    function isValidEmail(email) {
      // Replace this with a more robust email validation if needed
      const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
      return emailRegex.test(email);
    }

    function isValidPassword(password) {
      // Replace this with your actual password validation logic
      return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>])[a-zA-Z\d!@#$%^&*(),.?":{}|<>]{8,}$/.test(password);
    }

    document.addEventListener('DOMContentLoaded', function () {
      const surveyForm = document.getElementById('survey-form');

      surveyForm.addEventListener('submit', function (event) {
        event.preventDefault();

        const formData = new FormData(surveyForm);
        const surveyData = {};

        for (const [key, value] of formData.entries()) {
          surveyData[key] = value;
        }

        fetch('/surveyForm', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(surveyData)
        })
          .then(response => {
            if (response.ok) {
              return response.json();
            }
            throw new Error('Failed to save survey data');
          })
          .then(data => {
            console.log('Survey data saved successfully:', data);
            // Optionally, you can show a success message to the user
          })
          .catch(error => {
            console.error('Error saving survey data:', error);
            // Optionally, you can show an error message to the user
          });
      });
    });

  </script>

  <div class="line-break"></div>
  <!-- end of why us? section -->
  <!-- projects section -->
  <!-- <section id="projects" class="projects">
         <h2 class="heading">our projects</h2>
         <div class="box-container">
           <div class="box">
             <div class="image">
               <img src="images/work_1.jpg" alt="" />
               <div class="overlay">
                 <h3>project name here</h3>
                 <span>business</span>
               </div>
             </div>
           </div>
         
           <div class="box">
             <div class="image">
               <img src="images/work_2.jpg" alt="" />
               <div class="overlay">
                 <h3>project name here</h3>
                 <span>business</span>
               </div>
             </div>
           </div>
         
           <div class="box">
             <div class="image">
               <img src="images/work_3.jpg" alt="" />
               <div class="overlay">
                 <h3>project name here</h3>
                 <span>business</span>
               </div>
             </div>
           </div>
         
           <div class="box">
             <div class="image">
               <img src="images/work_4.jpg" alt="" />
               <div class="overlay">
                 <h3>project name here</h3>
                 <span>business</span>
               </div>
             </div>
           </div>
         
           <div class="box">
             <div class="image">
               <img src="images/work_1.jpg" alt="" />
               <div class="overlay">
                 <h3>project name here</h3>
                 <span>business</span>
               </div>
             </div>
           </div>
         
           <div class="box">
             <div class="image">
               <img src="images/work_2.jpg" alt="" />
               <div class="overlay">
                 <h3>project name here</h3>
                 <span>business</span>
               </div>
             </div>
           </div>
         </div>
         </section> -->
  <!-- projects section -->
  <!-- footer section -->
  <section id="footer" class="footer">
    <div class="socials">
      <ion-icon name="logo-google"></ion-icon>
      <ion-icon name="logo-snapchat"></ion-icon>
      <ion-icon name="logo-twitter"></ion-icon>
      <ion-icon name="logo-youtube"></ion-icon>
      <ion-icon name="logo-linkedin"></ion-icon>
    </div>
    <div class="copyright">
      <p>Designed & Created by Aleena Ali</p>
    </div>
  </section>
  <!-- footer section -->

  <!-- ionicons js files -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  <!-- Other scripts here, including the one that might be using toggleSurveyVisibility -->
  <!-- <script src="js/server.js" defer></script> -->
  <!-- <script src="js/script1.js" defer></script> -->
  <script src="js/script.js" type="module"></script>
  <!-- Load form.js after the HTML elements it interacts with -->
  <script src="js/form.js" defer></script>
  <!-- if user is logged in successfully, the login form will be replaced with the survey form -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Function to toggle the visibility of the login form
      function toggleLoginFormVisibility(isLoggedIn) {
        const loginForm = document.getElementById('login');
        if (isLoggedIn) {
          loginForm.style.display = 'none'; // Hide the login form
        } else {
          loginForm.style.display = 'block'; // Show the login form
        }
      }

      // Function to toggle the visibility of the survey container
      function toggleSurveyVisibility(isLoggedIn) {
        const surveyContainer = document.getElementById('survey_container');
        if (isLoggedIn) {
          surveyContainer.style.display = 'block'; // Show the survey container
        } else {
          surveyContainer.style.display = 'none'; // Hide the survey container
        }
      }

      // Actual logic to determine if the user is logged in
      const isLoggedIn = localStorage.getItem('userToken') !== null;

      // Call functions to toggle visibility based on login status
      toggleLoginFormVisibility(isLoggedIn);
      toggleSurveyVisibility(isLoggedIn);
    });
  </script>
  <!-- Add this script at the end of your HTML, before the closing </body> tag -->
  <script defer>
    // Function to toggle the visibility of the survey container
    function toggleSurveyVisibility() {
      const surveyContainer = document.getElementById('survey_container');
      const isLoggedIn = localStorage.getItem('userToken') !== null;

      if (isLoggedIn) {
        surveyContainer.style.display = 'block'; // Show the container
      } else {
        surveyContainer.style.display = 'none'; // Hide the container
      }
    }

  </script>

</body>

</html>